<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mapa Interativo - Pintar Estados</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        body { margin: 0; padding: 0; font-family: sans-serif; }
        #map { height: 100vh; width: 100vw; background: #f0f0f0; }
        .instrucoes {
            position: absolute; top: 10px; left: 50%; transform: translateX(-50%);
            z-index: 1000; background: rgba(255,255,255,0.9);
            padding: 10px 20px; border-radius: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            pointer-events: none; text-align: center; width: 80%;
        }
    </style>
</head>
<body>

    <div class="instrucoes">
        <b>Toque em um estado para marcar como visitado! üìç</b>
    </div>

    <div id="map"></div>

    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <script>
        const map = L.map('map').setView([-15.78, -47.92], 4);

        // Mapa de fundo bem discreto
        L.tileLayer('https://{s}.basemaps.cartocdn.com/light_nolabels/{z}/{x}/{y}{r}.png').addTo(map);

        // URL com as fronteiras dos estados do Brasil
        const geojsonUrl = "https://raw.githubusercontent.com/codeforamerica/click_that_hood/master/public/data/brazil-states.geojson";

        function estiloPadrao(feature) {
            return {
                fillColor: '#bdc3c7', // Cinza (n√£o visitado)
                weight: 1,
                opacity: 1,
                color: 'white',
                fillOpacity: 0.5
            };
        }

        fetch(geojsonUrl)
            .then(response => response.json())
            .then(data => {
                L.geoJSON(data, {
                    style: estiloPadrao,
                    onEachFeature: function (feature, layer) {
                        layer.on('click', function (e) {
                            // Quando clica, muda a cor para Verde
                            this.setStyle({
                                fillColor: '#2ecc71',
                                fillOpacity: 0.8
                            });
                            
                            // Abre um bal√£o perguntando o coment√°rio
                            const local = feature.properties.name;
                            const comentario = prompt(`O que voc√™ achou de ${local}?`);
                            if(comentario) {
                                layer.bindPopup(`<b>${local}</b><br>${comentario}`).openPopup();
                            }
                        });
                    }
                }).addTo(map);
            });
    </script>
</body>
</html>
